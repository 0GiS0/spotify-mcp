2024-11-28 13:05:28,129 - INFO - Starting Spotify MCP server
2024-11-28 13:05:28,133 - INFO - Server initialized successfully
2024-11-28 13:05:28,141 - INFO - Listing available tools
2024-11-28 13:05:28,142 - INFO - Available tools: ['GetCurrentTrack', 'StartPlayback']
2024-11-28 13:05:42,296 - INFO - Tool called: GetCurrentTrack with arguments: {}
2024-11-28 13:05:42,296 - INFO - Attempting to get current track
2024-11-28 13:05:42,801 - INFO - No track currently playing
2024-11-28 13:06:12,148 - INFO - Tool called: GetCurrentTrack with arguments: {}
2024-11-28 13:06:12,148 - INFO - Attempting to get current track
2024-11-28 13:06:12,264 - INFO - Current track retrieved: You Old Dog
----
2024-11-28 13:14:21,054 - INFO - Starting Spotify MCP server
2024-11-28 13:14:21,057 - INFO - Server initialized successfully
2024-11-28 13:17:24,338 - INFO - Starting Spotify MCP server
2024-11-28 13:17:24,341 - INFO - Server initialized successfully
2024-11-28 13:19:13,715 - INFO - Starting Spotify MCP server
2024-11-28 13:19:13,718 - INFO - Server initialized successfully
2024-11-28 13:19:28,912 - INFO - Starting Spotify MCP server
2024-11-28 13:19:28,915 - INFO - Server initialized successfully
2024-11-28 13:20:15,008 - INFO - Starting Spotify MCP server
2024-11-28 13:20:15,011 - INFO - Server initialized successfully
2024-11-28 13:24:27,105 - INFO - Starting Spotify MCP server
2024-11-28 13:24:27,108 - INFO - Server initialized successfully
2024-11-28 13:24:59,886 - INFO - Starting Spotify MCP server
2024-11-28 13:24:59,889 - INFO - Server initialized successfully
2024-11-28 13:25:16,479 - INFO - Starting Spotify MCP server
2024-11-28 13:25:16,484 - INFO - Server initialized successfully
2024-11-28 13:27:11,227 - INFO - Starting Spotify MCP server
2024-11-28 13:27:11,230 - INFO - Server initialized successfully
2024-11-28 13:27:27,056 - INFO - Starting Spotify MCP server
2024-11-28 13:27:27,060 - INFO - Server initialized successfully
2024-11-28 13:27:27,075 - INFO - Listing available tools
2024-11-28 13:27:27,076 - INFO - Available tools: ['GetCurrentTrack', 'StartPlayback']
2024-11-28 13:27:38,534 - INFO - Tool called: GetCurrentTrack with arguments: {}
2024-11-28 13:27:38,535 - INFO - Attempting to get current track
2024-11-28 13:27:38,713 - INFO - No playback session found
2024-11-28 13:27:38,713 - INFO - No track currently playing
2024-11-28 13:28:24,895 - INFO - Tool called: StartPlayback with arguments: {'song_id': 'null'}
2024-11-28 13:28:24,895 - INFO - Starting playback with arguments: {'song_id': 'null'}
2024-11-28 13:28:24,896 - INFO - Auth check result: valid
2024-11-28 13:28:25,436 - ERROR - Error starting playback: http status: 400, code:-1 - https://api.spotify.com/v1/me/player/play?device_id=907992c54709732fabe9e2124b527a85e603d036:
 Invalid track uri: spotify:track:null, reason: None
Traceback (most recent call last):
  File "/Users/varun/Documents/Python/spotify_mcp/.venv/lib/python3.12/site-packages/spotipy/client.py", line 275, in _internal_call
    response.raise_for_status()
  File "/Users/varun/Documents/Python/spotify_mcp/.venv/lib/python3.12/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.spotify.com/v1/me/player/play?device_id=907992c54709732fabe9e2124b527a85e603d036

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/varun/Documents/Python/spotify_mcp/src/spotify_mcp/spotify_api.py", line 126, in start_playback
    result = self.sp.start_playback(uris=uris, device_id=device_id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/varun/Documents/Python/spotify_mcp/.venv/lib/python3.12/site-packages/spotipy/client.py", line 1837, in start_playback
    return self._put(
           ^^^^^^^^^^
  File "/Users/varun/Documents/Python/spotify_mcp/.venv/lib/python3.12/site-packages/spotipy/client.py", line 342, in _put
    return self._internal_call("PUT", url, payload, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/varun/Documents/Python/spotify_mcp/.venv/lib/python3.12/site-packages/spotipy/client.py", line 297, in _internal_call
    raise SpotifyException(
spotipy.exceptions.SpotifyException: http status: 400, code:-1 - https://api.spotify.com/v1/me/player/play?device_id=907992c54709732fabe9e2124b527a85e603d036:
 Invalid track uri: spotify:track:null, reason: None
2024-11-28 13:28:25,439 - ERROR - Spotify Client error occurred: http status: 400, code:-1 - https://api.spotify.com/v1/me/player/play?device_id=907992c54709732fabe9e2124b527a85e603d036:
 Invalid track uri: spotify:track:null, reason: None
Traceback (most recent call last):
  File "/Users/varun/Documents/Python/spotify_mcp/.venv/lib/python3.12/site-packages/spotipy/client.py", line 275, in _internal_call
    response.raise_for_status()
  File "/Users/varun/Documents/Python/spotify_mcp/.venv/lib/python3.12/site-packages/requests/models.py", line 1024, in raise_for_status
    raise HTTPError(http_error_msg, response=self)
requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: https://api.spotify.com/v1/me/player/play?device_id=907992c54709732fabe9e2124b527a85e603d036

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/varun/Documents/Python/spotify_mcp/src/spotify_mcp/server.py", line 109, in handle_call_tool
    spotify_client.start_playback(**arguments)
  File "/Users/varun/Documents/Python/spotify_mcp/src/spotify_mcp/utils.py", line 117, in wrapper
    return func(self, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/varun/Documents/Python/spotify_mcp/src/spotify_mcp/spotify_api.py", line 126, in start_playback
    result = self.sp.start_playback(uris=uris, device_id=device_id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/varun/Documents/Python/spotify_mcp/.venv/lib/python3.12/site-packages/spotipy/client.py", line 1837, in start_playback
    return self._put(
           ^^^^^^^^^^
  File "/Users/varun/Documents/Python/spotify_mcp/.venv/lib/python3.12/site-packages/spotipy/client.py", line 342, in _put
    return self._internal_call("PUT", url, payload, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/varun/Documents/Python/spotify_mcp/.venv/lib/python3.12/site-packages/spotipy/client.py", line 297, in _internal_call
    raise SpotifyException(
spotipy.exceptions.SpotifyException: http status: 400, code:-1 - https://api.spotify.com/v1/me/player/play?device_id=907992c54709732fabe9e2124b527a85e603d036:
 Invalid track uri: spotify:track:null, reason: None
2024-11-28 13:29:04,384 - INFO - Starting Spotify MCP server
2024-11-28 13:29:04,387 - INFO - Server initialized successfully
2024-11-28 13:31:00,145 - INFO - Starting Spotify MCP server
2024-11-28 13:31:00,148 - INFO - Server initialized successfully
2024-11-28 13:31:08,562 - INFO - Starting Spotify MCP server
2024-11-28 13:31:08,566 - INFO - Server initialized successfully
2024-11-28 13:31:08,574 - INFO - Listing available tools
2024-11-28 13:31:08,575 - INFO - Available tools: ['GetCurrentTrack', 'StartPlayback']
2024-11-28 13:31:17,584 - INFO - Tool called: GetCurrentTrack with arguments: {}
2024-11-28 13:31:17,584 - INFO - Attempting to get current track
2024-11-28 13:31:18,220 - INFO - No playback session found
2024-11-28 13:31:18,221 - INFO - No track currently playing
2024-11-28 13:31:27,144 - INFO - Tool called: StartPlayback with arguments: {}
2024-11-28 13:31:27,144 - INFO - Starting playback with arguments: {}
2024-11-28 13:31:27,144 - INFO - Auth check result: valid
2024-11-28 13:31:27,419 - INFO - No playback session found
2024-11-28 13:31:27,419 - INFO - No song ID provided and no current track to resume
2024-11-28 13:31:27,419 - INFO - Playback started successfully
2024-11-28 13:31:29,166 - INFO - Tool called: GetCurrentTrack with arguments: {}
2024-11-28 13:31:29,166 - INFO - Attempting to get current track
2024-11-28 13:31:29,257 - INFO - No playback session found
2024-11-28 13:31:29,257 - INFO - No track currently playing
2024-11-28 13:40:29,318 - INFO - Starting Spotify MCP server
2024-11-28 13:40:29,330 - INFO - Server initialized successfully
2024-11-28 13:47:58,362 - INFO - No playback session found
2024-11-28 13:48:28,244 - INFO - Auth check result: valid
2024-11-28 13:48:28,513 - INFO - No playback session found
2024-11-28 13:48:28,513 - ERROR - Error starting playback: 'NoneType' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/varun/Documents/Python/spotify_mcp/src/spotify_mcp/spotify_api.py", line 119, in start_playback
    if not curr_track and curr_track.get('is_playing', False):
                          ^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get'
2024-11-28 13:49:17,060 - INFO - Auth check result: valid
2024-11-28 13:49:17,438 - INFO - No playback session found
2024-11-28 13:49:17,819 - INFO - Playback started successfully
